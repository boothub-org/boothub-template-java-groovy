[[user_guide]]
= User Guide

[[build]]
== Build

After generating the project skeleton and creating a working copy on your computer, you can build the project with:

----
gradlew build
----

Let us consider that your project is called `my-project` and consists of three modules: `myproject-core`, `myproject-api` and `myproject-demo`.
Also, let us consider that you specified that the project should have a main application class named `MyDemo` in the `myproject-demo` module.

Then, you can build an uncompressed distribution by executing:
----
gradlew installDist
----

Running the start script found in the `myproject-demo/build/install/myProject/bin` directory, the following text should appear on your terminal:
----
Hello from MyDemo!
----

[[idea]]
== IntelliJ Idea

- start the IntelliJ Idea IDE
- if your project uses Groovy or Spock: make sure that the Groovy plugin is enabled
- open _build.gradle_


[[eclipse]]
== Eclipse

- start the Eclipse IDE
- if your project uses Groovy or Spock: install the https://github.com/groovy/groovy-eclipse/wiki#releases[Groovy plugin]
- install a recent version of https://projects.eclipse.org/projects/tools.buildship[Buildship]
- import the project using the Gradle Project wizard

[[versioning]]
== Versioning

The file `gradle.properties` contains variables that are used to create a version string conforming to the https://semver.org[semantic versioning] standard.
The names of these variables are prefixed by the camelCase representation of the project name, for example:
`myProjectVersionMajor`, `myProjectVersionMinor`, `myProjectVersionPatch`.

Additionally, a boolean variable (named for example `myProjectReleaseBuild`) is used to specify whether the current build represents a release or a snapshot.

By editing the values of these variables you can change the version of your project.

For example, to bump your project version to `1.2.3-SNAPSHOT`, your `gradle.properties` should contain:
----
myProjectVersionMajor = 1
myProjectVersionMinor = 2
myProjectVersionPatch = 3
myProjectReleaseBuild = false
----


[[travis]]
== Travis CI

If your project is on GitHub, you will benefit from the https://travis-ci.com/[Travis] configuration and script files generated by BootHub.
Besides building the project and running the tests, Travis also executes the tasks responsible for publishing the documentation (AsciiDoc und javadoc/groovydoc)
and for managing the list of release-specific links.

In order to allow Travis to take care of your project you need to perform a few actions.
Some of the steps described below are one-time operations that may be skipped if they have already been executed.


. authorize Travis as OAuth application for your GitHub account (if not already authorized):
** open https://github.com/marketplace/travis-ci
** click 'Set up a free trial'
** in the 'Pricing and Setup' section select 'Open Source'
** click 'Install it for free'
** click 'Complete order and begin installation'
** click 'Authorize travis-ci'

. create the `publishGhPages` Personal Access Token on Github (if not already created):
** go to https://github.com/settings/tokens/new to generate the new token (click https://help.github.com/articles/creating-a-personal-access-token-for-the-command-line/[here] for more details)
*** enter `publishGhPages` as token description
*** select `public_repo` as scope (or `repo` if your repository is private)
*** click `Generate token`
** save the generated token for future use in a secure place (you will not be able to see it again!)

. activate Travis for your project
** copy the `publishGhPages` token to clipboard
** open https://travis-ci.org
** go to your Travis profile page (\https://travis-ci.org/profile/<your-github-username>)
** find your project in the repository list and activate it (click `Sync account` and press `F5` if your project does not appear in the list)
** go to the Travis Settings page of your project (\https://travis-ci.org/<your-github-username>/<your-github-repo>/settings)
** under `Environment Variables` add a variable named `GH_PAGES_ACCESS_TOKEN` with the token value you copied to the clipboard.
*** make sure that 'Display value in build log' is OFF
*** click `ADD`.

Travis is now ready to build your project.
To trigger a new build you need to make a change to your project and push it to GitHub.

[[doc_publishing]]
== Automatic documentation publishing

If Travis is enabled for your GitHub project, it publishes the AsciiDoc and javadoc/groovydoc to https://help.github.com/articles/user-organization-and-project-pages/#project-pages[GitHub Project Pages].

It also publishes and updates the list of release-specific links:

image::release-list.png[]

The `README.md` file generated by BootHub contains links to the AsciiDoc and javadoc/groovydoc of the latest release, as well as a link to the list of release-specific links:

image::readme.png[]

NOTE: The links in the `README.md` file shown above become valid only after Travis has completed its first build.


=== Custom domain name

If you have specified a custom domain name for the GitHub Pages site during the project generation, BootHub has created a `CNAME` file in the `ghpages` directory.
This `CNAME` file, which contains the custom domain name, will be pushed to the `gh-pages` branch of your GitHub project when Travis builds your project for the first time.
(If you have not specified a custom domain name during the project generation, you can also https://help.github.com/articles/adding-or-removing-a-custom-domain-for-your-github-pages-site/[add a custom domain] later.)

To access your GitHub Pages site using a custom domain you need to set up the custom domain with your DNS provider,
as described in the last of the step of https://help.github.com/articles/quick-start-setting-up-a-custom-domain/[this document].


[[asciidoc]]
=== AsciiDoc

The template generates in the `doc` directory a documentation skeleton tailored to your project.
The information already available in this generated documentation include:

* the author of the documentation (by default, the first person in the developer list)
* the location of the source code on GitHub
* the location of the javadoc/groovydoc
* project licensing information (including a link to the license file)
* java version requirements
* info about the artifacts of this project and how other projects can use them via Maven or Gradle
* info for developers:
** how to build the project
** how to configure the project in Eclipse or IntelliJ Idea
** how to configure the credentials needed to publish artifacts to Bintray

== License header check

If you enabled the license header check, your source files must include the header provided in the `license-header.txt` file.

See the https://github.com/hierynomus/license-gradle-plugin[license-gradle-plugin] for more details.

== Findbugs

If you enabled FindBugs, the gradle script will use the https://docs.gradle.org/current/userguide/findbugs_plugin.html[FindBugs plugin]
to perform quality checks during the build.

In the file `findbugsExclude.xml` you can configure which issues to exclude from being reported.

== Testing

During the build, the gradle script executes your JUnit and Spock tests.

You can find the test reports in the `build/reports/test` directory.

Spock test reports are also available in the `build/spock-reports` directory.

== Code coverage

The gradle script uses the https://github.com/bmuschko/gradle-clover-plugin[Clover plugin] to generate a code coverage report.

After executing:
----
gradlew cloverGenerateReport
----
you will find the code coverage reports in the `build/reports/clover` directory.

== Publishing to JCenter and Maven Central

The Gradle task `bintrayUpload` lets you publish your artifacts to https://bintray.com/[Bintray].
You can then https://bintray.com/docs/usermanual/uploads/uploads_centralrepositories.html#_including_your_package_in_jcenter[include your packages in JCenter]
and https://bintray.com/docs/usermanual/uploads/uploads_syncingwiththirdpartyplatforms.html#_syncing_artifacts_with_maven_central[synchronize them with Maven Central].

Before being able to execute the `bintrayUpload` task, you need to configure your credentials.

=== Credentials
Your Gradle build script uses the https://github.com/stevesaliman/gradle-properties-plugin[gradle-properties-plugin],
which allows you to configure additional project properties in the `gradle-local.properties` file.

This is the file in which you should configure your credentials.
Since `gradle-local.properties` is already listed in your project's `.gitignore` file, your credentials will not be committed to git.

To create this file you can simply copy the provided template file `gradle-local-template.properties` to `gradle-local.properties`.
The content of this file is shown below:
----
signingKeyId = A0B1C2D3
signingSecretKeyRingFile = C:/dev/gpg/jsmith.gpg

bintrayUser = jsmith
bintrayKey = a0b1c2d3e4f5a0b1c2d3e4f5a0b1c2d3e4f5a0b1
----

You need to configure the appropriate values for the above properties, which are used for signing your artifacts and for granting you access to Bintray.

The signing credentials consist of:

* the public key ID (an 8 character hexadecimal string)
* the absolute path to the secret key ring file containing your private key
* the passphrase used to protect your private key

The passphrase of your private key is a very sesnsitive information, therefore it is not stored in the `gradle-local.properties`.
Instead, Gradle will ask you to enter it each time you execute the `bintrayUpload` task.

See the https://www.gnupg.org/documentation/howtos.html[GnuPG documentation] and the
https://docs.gradle.org/current/userguide/signing_plugin.html[Gradle signing plugin] for details on how to create and configure your signatures.

The Bintray credentials consist of your Bintray user name and your
https://bintray.com/docs/usermanual/interacting/interacting_interacting.html#anchorAPIKEY[Bintray API Key].
See the documentation of the https://github.com/bintray/gradle-bintray-plugin[gradle-bintray-plugin] for more details.
